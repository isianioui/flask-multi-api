# Projet APIs Flask - Simulation d'Organes Humains

## ğŸ“‹ Description du Projet

Ce projet implÃ©mente un systÃ¨me distribuÃ© d'APIs Flask simulant le fonctionnement des organes humains et gÃ©nÃ©rant des donnÃ©es mÃ©dicales synthÃ©tiques rÃ©alistes. Il comprend :

- **3 APIs d'organes** : Cardiaque, Respiratoire, Neurologique
- **1 API d'orchestration** : Coordination et agrÃ©gation des donnÃ©es
- **GÃ©nÃ©ration de donnÃ©es synthÃ©tiques** : BasÃ©es sur des valeurs physiologiques rÃ©alistes
- **Simulation de pathologies** : Conditions mÃ©dicales variÃ©es
- **Architecture microservices** : APIs indÃ©pendantes et communicantes

## ğŸ—ï¸ Architecture du Projet

```
projet-organes/
â”œâ”€â”€ cardiac-api/              # API SystÃ¨me Cardiovasculaire (Port 5001)
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ respiratory-api/          # API SystÃ¨me Respiratoire (Port 5002)
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ neural-api/              # API SystÃ¨me Nerveux (Port 5003)
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ orchestration-api/       # API de Coordination (Port 5000)
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ documentation/
â”‚   â”œâ”€â”€ API_DOCUMENTATION.md
â”‚   â”œâ”€â”€ GUIDE_UTILISATION.md
â”‚   â””â”€â”€ RAPPORT_TECHNIQUE.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh            # Script d'installation (Linux/Mac)
â”‚   â”œâ”€â”€ setup.bat           # Script d'installation (Windows)
â”‚   â”œâ”€â”€ start_all.sh        # DÃ©marrage de toutes les APIs (Linux/Mac)
â”‚   â””â”€â”€ start_all.bat       # DÃ©marrage de toutes les APIs (Windows)
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_cardiac.py
â”‚   â”œâ”€â”€ test_respiratory.py
â”‚   â”œâ”€â”€ test_neural.py
â”‚   â””â”€â”€ test_orchestration.py
â”‚
â””â”€â”€ README.md               # Ce fichier
```

## ğŸš€ Installation Rapide

### PrÃ©requis
- Python 3.8 ou supÃ©rieur
- pip (gestionnaire de paquets Python)
- Terminal/Invite de commandes

### Installation Automatique

#### Linux/Mac
```bash
chmod +x scripts/setup.sh
./scripts/setup.sh
```

#### Windows
```batch
scripts\setup.bat
```

### Installation Manuelle

1. **Cloner ou tÃ©lÃ©charger le projet**
```bash
cd projet-organes
```

2. **Installer chaque API**

Pour chaque API (cardiac-api, respiratory-api, neural-api, orchestration-api) :

```bash
cd cardiac-api
python -m venv venv
source venv/bin/activate  # Linux/Mac   
# ou venv\Scripts\activate  # Windows
pip install -r requirements.txt
deactivate
cd ..
```

RÃ©pÃ©ter pour respiratory-api, neural-api et orchestration-api.

## ğŸ® DÃ©marrage des APIs

### MÃ©thode 1 : DÃ©marrage Automatique

#### Linux/Mac
```bash
chmod +x scripts/start_all.sh
./scripts/start_all.sh
```

#### Windows
```batch
scripts\start_all.bat
```

### MÃ©thode 2 : DÃ©marrage Manuel

**Important** : Ouvrir 4 terminaux sÃ©parÃ©s, un pour chaque API.

**Terminal 1 - Cardiac API**
```bash
cd cardiac-api
source venv/bin/activate  # Linux/Mac
# ou venv\Scripts\activate  # Windows
python app.py
```

**Terminal 2 - Respiratory API**
```bash
cd respiratory-api
source venv/bin/activate
python app.py
```

**Terminal 3 - Neural API**
```bash
cd neural-api
source venv/bin/activate
python app.py
```

**Terminal 4 - Orchestration API**
```bash
cd orchestration-api
source venv/bin/activate
python app.py
```

### VÃ©rification du DÃ©marrage

Une fois toutes les APIs dÃ©marrÃ©es, testez :

```bash
# Tester chaque API
curl http://localhost:5001/api/cardiac/status
curl http://localhost:5002/api/respiratory/status
curl http://localhost:5003/api/neural/status

# Tester l'orchestration
curl http://localhost:5000/api/orchestration/health
```

## ğŸ“Š AperÃ§u des APIs

### 1. Cardiac API (Port 5001)
Simule le systÃ¨me cardiovasculaire.

**DonnÃ©es gÃ©nÃ©rÃ©es :**
- FrÃ©quence cardiaque (60-100 bpm)
- Pression artÃ©rielle (systolique/diastolique)
- Saturation en oxygÃ¨ne (95-100%)
- DÃ©bit cardiaque (4-8 L/min)

**Pathologies :**
- Tachycardie, Bradycardie, Arythmie, Hypertension

### 2. Respiratory API (Port 5002)
Simule le systÃ¨me respiratoire.

**DonnÃ©es gÃ©nÃ©rÃ©es :**
- FrÃ©quence respiratoire (12-20 /min)
- Volumes pulmonaires
- Gaz du sang (PaO2, PaCO2, pH)

**Pathologies :**
- Asthme, BPCO, Hyperventilation, ApnÃ©e

### 3. Neural API (Port 5003)
Simule le systÃ¨me nerveux central.

**DonnÃ©es gÃ©nÃ©rÃ©es :**
- Ondes EEG (alpha, beta, theta, delta)
- Neurotransmetteurs (dopamine, sÃ©rotonine, noradrÃ©naline)
- ActivitÃ© cÃ©rÃ©brale
- Temps de rÃ©action

**Pathologies :**
- Ã‰pilepsie, Migraine, Troubles du sommeil, Stress

### 4. Orchestration API (Port 5000)
Coordonne toutes les APIs d'organes.

**FonctionnalitÃ©s :**
- AgrÃ©gation de donnÃ©es
- Surveillance globale
- Simulation coordonnÃ©e
- Gestion centralisÃ©e des paramÃ¨tres

## ğŸ’¡ Exemples d'Utilisation

### Exemple 1 : RÃ©cupÃ©ration de DonnÃ©es

```python
import requests
import json

# DonnÃ©es cardiaques
response = requests.get('http://localhost:5001/api/cardiac/data')
print(json.dumps(response.json(), indent=2))

# Toutes les donnÃ©es via l'orchestrateur
response = requests.get('http://localhost:5000/api/orchestration/data/all')
print(json.dumps(response.json(), indent=2))
```

### Exemple 2 : Simulation de Pathologie

```python
import requests

# Simuler une tachycardie
response = requests.post('http://localhost:5001/api/cardiac/simulate/tachycardia')
print(response.json())

# RÃ©cupÃ©rer les donnÃ©es affectÃ©es
response = requests.get('http://localhost:5001/api/cardiac/data?count=5')
print(response.json())
```

### Exemple 3 : Simulation CoordonnÃ©e

```python
import requests

# Simuler un Ã©tat d'exercice intense sur tous les organes
params = {
    "age": 30,
    "sex": "M",
    "activity_level": "intense_exercise"
}

# Mettre Ã  jour tous les organes
response = requests.post(
    'http://localhost:5000/api/orchestration/parameters',
    json=params
)

# RÃ©cupÃ©rer les donnÃ©es pendant l'exercice
response = requests.get('http://localhost:5000/api/orchestration/data/all?count=10')
data = response.json()

# Afficher les frÃ©quences cardiaques et respiratoires
for point in data['organs']['cardiac']['data']:
    print(f"FC: {point['heart_rate']} bpm")
```

### Exemple 4 : Monitoring en Temps RÃ©el

```python
import requests
import time

while True:
    # Vue d'ensemble
    overview = requests.get('http://localhost:5000/api/orchestration/overview')
    data = overview.json()
    
    print(f"\n=== {data['timestamp']} ===")
    print(f"Statut systÃ¨me: {data['system_health']['overall_status']}")
    
    # Afficher l'Ã©tat de chaque organe
    for organ, status in data['system_health']['organs'].items():
        print(f"  {organ}: {status['status']}")
    
    time.sleep(5)  # VÃ©rifier toutes les 5 secondes
```

## ğŸ§ª Tests

### Tests Unitaires

Des tests unitaires sont fournis pour chaque API :

```bash
# Tester l'API cardiaque
cd tests
python test_cardiac.py

# Tester l'API respiratoire
python test_respiratory.py

# Tester l'API neurologique
python test_neural.py

# Tester l'orchestration
python test_orchestration.py
```

### Tests Manuels avec cURL

```bash
# Test Cardiac API
curl http://localhost:5001/api/cardiac/status
curl http://localhost:5001/api/cardiac/data?count=3
curl -X POST http://localhost:5001/api/cardiac/simulate/tachycardia

# Test Respiratory API
curl http://localhost:5002/api/respiratory/status
curl -X POST http://localhost:5002/api/respiratory/simulate/asthma

# Test Neural API
curl http://localhost:5003/api/neural/status
curl -X POST http://localhost:5003/api/neural/simulate/stress

# Test Orchestration
curl http://localhost:5000/api/orchestration/overview
curl http://localhost:5000/api/orchestration/health
```

### Tests avec Postman

Importez les collections Postman fournies dans le dossier `tests/postman/`.

## ğŸ“š Documentation ComplÃ¨te

- **[API_DOCUMENTATION.md](documentation/API_DOCUMENTATION.md)** : Documentation technique des endpoints
- **[GUIDE_UTILISATION.md](documentation/GUIDE_UTILISATION.md)** : Guide d'utilisation dÃ©taillÃ©
- **[RAPPORT_TECHNIQUE.md](documentation/RAPPORT_TECHNIQUE.md)** : Rapport technique du projet

## ğŸ”§ Configuration

### Ports par DÃ©faut
- Cardiac API : 5001
- Respiratory API : 5002
- Neural API : 5003
- Orchestration API : 5000

### Modification des Ports

Pour changer les ports, modifiez la derniÃ¨re ligne de chaque `app.py` :

```python
if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=VOTRE_PORT)
```

Et mettez Ã  jour la configuration dans `orchestration-api/app.py`.

## ğŸ¯ FonctionnalitÃ©s Principales

### GÃ©nÃ©ration de DonnÃ©es SynthÃ©tiques
- âœ… Valeurs physiologiques rÃ©alistes
- âœ… Variation naturelle
- âœ… Influence de l'Ã¢ge, du sexe, de l'activitÃ©
- âœ… CohÃ©rence entre les mesures

### Simulation de Pathologies
- âœ… Conditions cardiaques (tachycardie, bradycardie, arythmie, hypertension)
- âœ… Conditions respiratoires (asthme, BPCO, hyperventilation, apnÃ©e)
- âœ… Conditions neurologiques (Ã©pilepsie, migraine, troubles du sommeil, stress)

### Orchestration
- âœ… AgrÃ©gation des donnÃ©es de tous les organes
- âœ… Surveillance de la santÃ© des APIs
- âœ… Coordination des simulations
- âœ… Gestion centralisÃ©e des paramÃ¨tres

### API REST
- âœ… Endpoints standardisÃ©s
- âœ… RÃ©ponses JSON
- âœ… Gestion des erreurs
- âœ… CORS activÃ©

## âš ï¸ ConsidÃ©rations Ã‰thiques

**IMPORTANT** : Ce projet est strictement pÃ©dagogique.

- âŒ **NE PAS** utiliser pour des diagnostics mÃ©dicaux rÃ©els
- âŒ **NE PAS** considÃ©rer les donnÃ©es comme rÃ©elles
- âœ… **USAGE Ã‰DUCATIF UNIQUEMENT**
- âœ… Les donnÃ©es sont 100% synthÃ©tiques
- âœ… Aucune donnÃ©e personnelle de santÃ© rÃ©elle

## ğŸ› DÃ©pannage

### ProblÃ¨me : Port dÃ©jÃ  utilisÃ©
```
OSError: [Errno 48] Address already in use
```
**Solution** : Un autre processus utilise le port. Terminez-le ou changez le port.

### ProblÃ¨me : Module non trouvÃ©
```
ModuleNotFoundError: No module named 'flask'
```
**Solution** : Activez l'environnement virtuel et installez les dÃ©pendances.

### ProblÃ¨me : Cannot connect to API
**Solution** : VÃ©rifiez que toutes les APIs sont dÃ©marrÃ©es avant l'orchestration.

### ProblÃ¨me : CORS Error
**Solution** : flask-cors est installÃ© et activÃ©. VÃ©rifiez que l'installation est complÃ¨te.

## ğŸ“ Contributeurs

Projet rÃ©alisÃ© dans le cadre du TP "DÃ©veloppement d'APIs Flask".

## ğŸ“„ Licence

Usage Ã©ducatif uniquement - Projet pÃ©dagogique

## ğŸ”— Ressources

- [Documentation Flask](https://flask.palletsprojects.com/)
- [REST API Best Practices](https://restfulapi.net/)
- [Physiologie humaine](https://www.physiologie.org/)

## ğŸ“ Support

Pour toute question ou problÃ¨me :
1. Consultez la documentation dans `/documentation`
2. VÃ©rifiez les logs de chaque API
3. Testez les endpoints individuellement

---

**Version** : 1.0.0  
**Date** : Novembre 2025  
**Objectif** : PÃ©dagogique - Formation aux APIs REST et architecture microservices